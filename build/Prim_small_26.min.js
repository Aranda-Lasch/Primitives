function partialSum(e){return e.reduce((e,t,r,o)=>{const a=o.slice(0,r+1),s=a.reduce((e,t)=>e+t,0);return[...e,s]},[])}function setup(){colorMode(HSB),canvas=createCanvas(DIM,DIM,WEBGL),noStroke(),rect(100*M,500*M,50*M,50*M),pixelDensity(2),1==mobile?(txG=createGraphics(txW,txH,WEBGL),txS=txG.createShader(basicVert2,fragShaderA)):(shaderA=createShader(basicVert,fragShaderA),shaderA.setUniform("u_resolution",[DIM,DIM]),shad_Size=1024,bkrez=2800,myImg=createImage(8*shad_Size,shad_Size)),shaderBK=createShader(basicVert,fragShaderA),shaderBK.setUniform("u_resolution",[bkrez,bkrez]),bkImg=createImage(bkrez,bkrez),sPress(),sun=new p5.Vector(1,-1,1),sun.normalize(),gBorder=2,gScale=20,gVals=growth_Max+gBorder,gVals=bkGridTrueMax,grw=new GrowSys(1),rg=new Grid_Rhomb(gVals,gVals,gVals,gScale);let e=patternSelect[0];for(targetPt=rg.gPts[e.x][e.y][e.z],patternSelect.shift(),go.push(new Go3d(1,targetPt.x,targetPt.y,targetPt.z,gScale)),currGo=go[0],goNum=1,i=0;i<goNum;i++){goDepot[i]=[],resetDepot[i]=[],nextGrow();for(let e=0;e<go.length;e++){resetDepot[i][e]=[];for(let t=0;t<go[e].verts.length-2;t++)resetDepot[i][e].push(new p5.Vector(go[e].verts[t].x,go[e].verts[t].y,go[e].verts[t].z))}goDepot[i]=go,goModelsDepot.push(goModels)}currCluster=goNum-1,grow=-1,timer=0,color0=color(hR,sR,bR),color1=color0,color2=color0;let t=R.random_int(1/6*goModels.length,.8*goModels.length),r=Math.round(5/12*goModels.length),o=t+r*(1/3),a=t+.5*r,s=t+r*(2/3),n=t+1*r,c=R.random_int(0,3);for(i=0;i<goModels.length;i++)renderPattern.push(0),1==ERASE&&i>5&&i<.33*goModels.length&&(renderPattern[i]=1),1==WIREFRAME?0==c?i>t&&i<n&&(renderPattern[i]=3):1==c?i>t&&i<a?renderPattern[i]=3:i>a&&i<n&&(renderPattern[i]=5):2==c?i>t&&i<o?renderPattern[i]=3:i>o&&i<s&&(renderPattern[i]=3):i>s&&i<n?renderPattern[i]=5:i>t&&i<n&&(renderPattern[i]=3):1==OPAQUE?i>t&&i<n&&(renderPattern[i]=2):renderPattern.push(0)}function draw(){if(1==drawTex){if(drawTex=!1,1==mobile){txG.noStroke(),txG.shader(txS),txS.setUniform("u_resolution",[txH,txH]);for(let e=0;e<8;e++)console.log("txG mode, Jesse"),readUniforms(txS,e),txG.rect(e*txW/8-txW/2,-txH/2,txW/8,txH);txG.resetShader()}else{shaderA.setUniform("u_resolution",[shad_Size,shad_Size]),shader(shaderA),resizeCanvas(shad_Size,shad_Size,!1);for(let e=0;e<8;e++)readUniforms(shaderA,e),rect(0,0,40,40),myImg.copy(canvas,0,0,2*shad_Size,2*shad_Size,shad_Size*e,0,2*shad_Size,2*shad_Size);resetShader()}resizeCanvas(bkrez,bkrez,!1),shader(shaderBK);let e=2*v;UNIVAR[8][0][0]=e,bkgd_f!=bkgd_cat.arr[2].name&&(UNIVAR[8][0][1]=e+R.random_num(-20,20),UNIVAR[8][0][2]=e+R.random_num(-30,30),UNIVAR[8][0][3]=e+R.random_num(-30,20),UNIVAR[8][1][0]=e+R.random_num(-20,30)),UNIVAR[8][12][0]*=e/60,UNIVAR[8][12][1]*=e/60,UNIVAR[8][12][2]*=e/60,UNIVAR[8][12][3]*=e/60,UNIVAR[8][13][0]*=e/60,readUniforms(shaderBK,8),rect(0,0,40,40),bkImg.copy(canvas,0,0,bkrez,bkrez,0,0,bkrez,bkrez),resetShader(),resizeCanvas(DIM,DIM,!1)}if(background(color1),makeBorder(),lightFalloff(.003,3e-4,0),ambientLight(color0),noStroke(),0==run_animation&&(steps=go.length),1==grow)steps>=go.length?steps=go.length:millis()>timer&&(timer+=delay,steps++);else if(-1==grow)if(steps<=1){currCluster+=1,currCluster>goNum-1&&(currCluster=0),1==initGrow&&(go=[],resetGo=[],go=goDepot[currCluster].slice(),resetGo=resetDepot[currCluster].slice(),goModels=goModelsDepot[currCluster],initGrow=!1),zoomStart=zoom,camStart=[cam[0],cam[1],cam[2]],camTarg=[camTarg[0],camTarg[1],camTarg[2]];for(let e=0;e<go.length;e++)for(let t=0;t<go[e].verts.length-2;t++)go[e].verts[t]=new p5.Vector(resetGo[e][t].x,resetGo[e][t].y,resetGo[e][t].z);ratio=+camSpeed,vStart=vTarg,steps=1,grow*=-1}else millis()>timer&&(timer+=delay,steps-=3);if(push(),stroke(255,0,0),strokeWeight(6),line(0,0,0,0,0,1e5),pop(),updateCam(),1==swap&&(save("primative"),pixelDensity(2),ortho(-v*zoom,v*zoom,-v*zoom,v*zoom,-1e4,1e4),prtScn=!1,swap=!1),1==prtScn){let e=4800/DIM;pixelDensity(e),ortho(-v*zoom,v*zoom,-v*zoom,v*zoom,-1e4,1e4),swap=!0}}function readUniforms(e,t){for(let r=0;r<UNI.length;r++)e.setUniform(UNI[r],UNIVAR[t][r])}function lPress(){camStart=[cam[0],cam[1],cam[2]],camTarg=[0,camTarg[1]+angle,camTarg[2]+angle],zoomStart=zoom,myAngle+=angle,zflag--,zflag<0&&(zflag=2),zoomTarg=0==zflag?defaultZoom/2:defaultZoom,ratio=+camSpeed,vStart=vTarg,getModelExtents()}function rPress(){camStart=[cam[0],cam[1],cam[2]],camTarg=[0,camTarg[1]-angle,camTarg[2]-angle],zoomStart=zoom,myAngle-=angle,zflag++,zflag>=3&&(zflag=0),zoomTarg=0==zflag?defaultZoom/2:defaultZoom,ratio=+camSpeed,vStart=vTarg,getModelExtents()}function sPress(){camStart=[cam[0],cam[1],cam[2]],camTarg=[cam[0],cam[1],cam[2]],Math.abs((myAngle+zoomRR)%Math.PI)<=ZoomPercent?(zoomTarg=defaultZoom/2,zflag=0):(zoomTarg=defaultZoom,zoomRRR>=.5?zflag=1:zoomRRR<=.5&&(zflag=2)),zoomStart=zoomTarg,ratio=+camSpeed,ratio=.98999}function touchStarted(){mouseX>WIDTH/2?rPress():mouseX<WIDTH/2&&lPress()}function keyPressed(){if(keyCode===LEFT_ARROW?lPress():keyCode===RIGHT_ARROW?rPress():keyCode===UP_ARROW?(zoomStart=zoom,zoomTarg=defaultZoom/2,ratio=+camSpeed,camStart=[cam[0],cam[1],cam[2]],camTarg=[0,camTarg[1],camTarg[2]],vStart=vTarg,getModelExtents()):keyCode===DOWN_ARROW&&(zoomStart=zoom,zoomTarg=defaultZoom,ratio=+camSpeed,camStart=[cam[0],cam[1],cam[2]],camTarg=[0,camTarg[1],camTarg[2]],vStart=vTarg,getModelExtents()),"o"==key||"O"==key){let e=[],t=[],r=0;for(let o=0;o<go.length;o++)if(1!=renderPattern[o])for(let a=0;a<go[o].faces.length;a++){for(let t=0;t<go[o].faces[a].facePts.length;t++)e.push("v "+go[o].faces[a].facePts[t].x+" "+go[o].faces[a].facePts[t].y+" "+go[o].faces[a].facePts[t].z),r+=1;t.push("f "+(r-2)+" "+(r-1)+" "+r)}let o=e.concat(t);saveStrings(o,"primitive","obj")}"i"!=key&&"I"!=key||(prtScn=!0,console.log(prtScn),console.log(swap)),"u"!=key&&"U"!=key||myImg.save("primatives texture","png"),"g"!=key&&"G"!=key||(run_animation=!0,grow=-1)}function makeBorder(){push(),scale(zoom),fill(color2);let e=.1*v/1.15;1==BKTEXT&&(push(),lightFalloff(.003,3e-4,0),ambientLight(color0),texture(bkImg),translate(0,0,-1e3),box(1.15*(2*v-e)/zoom,1.15*(2*v-e)/zoom),pop()),push(),translate(-1.15*v/1.15,0,1e3),box(e,5*v),pop(),push(),translate(1.15*v/1.15,0,1e3),box(e,5*v),pop(),push(),translate(0,1.15*v/1.15,1e3),box(5*v,e),pop(),push(),translate(0,-1.15*v/1.15,1e3),box(5*v,e),pop(),pop()}function nextGrow(){cam=[0,cam[1]-myAngle,cam[2]-myAngle],camStart=[0,camStart[1]-myAngle,camStart[2]-myAngle],camTarg=[0,camTarg[1]-myAngle,camTarg[2]-myAngle],v=0,vStart=0,vTarg=0,steps=0,mGo=0,go=[],goModels=[],go.push(new Go3d(1,targetPt.x,targetPt.y,targetPt.z,gScale)),currGo=go[0];R.random_int(1,Math.floor(growth_Max/2)),Math.floor(growth_Max/2),R.random_int(1,growth_Max-1),R.random_int(1,growth_Max-1);currArraySize=go.length;for(let e=0;e<patternSelect.length;e++){let t=patternSelect[e];grw.growToTarget(rg.gPts[t.x][t.y][t.z])}getModelExtents();for(let e=0;e<go.length;e++){go[e].center.x+=-centerX,go[e].center.y+=-centerY,go[e].center.z+=-centerZ;for(let t=0;t<go[e].faces.length;t++){go[e].faces[t].center.x+=-centerX,go[e].faces[t].center.y+=-centerY,go[e].faces[t].center.z+=-centerZ;for(let r=0;r<go[e].faces[t].facePts.length;r++)go[e].faces[t].facePts[r].x+=-centerX,go[e].faces[t].facePts[r].y+=-centerY,go[e].faces[t].facePts[r].z+=-centerZ}}for(let e=0;e<go.length;e++)for(let t=0;t<go[e].verts.length;t++)go[e].verts[t].x+=-centerX,go[e].verts[t].y+=-centerY,go[e].verts[t].z+=-centerZ;xMax+=-centerX,xMin+=-centerX,yMax+=-centerY,yMin+=-centerY,zMax+=-centerZ,zMin+=-centerZ,getModelExtents(),0==v&&(v=vTarg,vStart=vTarg);for(let e=0;e<go.length;e++)geom=new p5.Geometry(1,1,buildModel),geom.gid="go"+mGo+"_"+R.random_dec(),goModels.push(geom),mGo++}function buildModel(){let e=0;for(let t=0;t<go[mGo].faces.length;t++){let r=[];for(let o=0;o<go[mGo].faces[t].facePts.length;o++)this.vertices.push(go[mGo].faces[t].facePts[o]),r.push(e),e+=1;this.faces.push([r[0],r[1],r[2]]),n=createVector(go[mGo].faces[t].normal.x,go[mGo].faces[t].normal.y,go[mGo].faces[t].normal.z),n.normalize(),this.vertexNormals.push(n,n,n);let o=1/8,a=sun.dot(n),s=(sun.angleBetween(n),map(a,-1,1,0,7));s=round(s);let c=this.vertices[r[0]].dist(this.vertices[r[1]]),i=this.vertices[r[0]].dist(this.vertices[r[2]]),l=this.vertices[r[1]].dist(this.vertices[r[2]]);c=map(c,0,41.71563256142714,0,1),i=map(c,0,41.71563256142714,0,1),l=map(c,0,41.71563256142714,0,1),"e"==go[mGo].faces[t].type?(this.uvs.push([o*s,0]),this.uvs.push([o*s,c]),this.uvs.push([o*s+.866*c*o,c/2])):c>i&&c>l?(this.uvs.push([o*s,0]),this.uvs.push([o*s,c]),this.uvs.push([o*s+.809*c*o,c/2])):i>c&&i>l?(this.uvs.push([o*s,0]),this.uvs.push([o*s+.809*i*o,i/2]),this.uvs.push([o*s,i])):l>c&&l>i&&(this.uvs.push([o*s+.809*l*o,l/2]),this.uvs.push([o*s,0]),this.uvs.push([o*s,l]));let m=R3.random_dec(),d=R4.random_dec();if(m<=.5)for(let e=0;e<this.uvs.length;e++)this.uvs[e][1]=1-this.uvs[e][1];if(d<=.5)for(let e=0;e<this.uvs.length;e++);}}function getModelExtents(){let e,t,r=[],o=[],a=[];for(let e=0;e<go.length;e++)for(let t=0;t<go[e].verts.length-2;t++)r.push(go[e].verts[t].x),o.push(go[e].verts[t].y),a.push(go[e].verts[t].z);r.sort((e,t)=>e-t),o.sort((e,t)=>e-t),a.sort((e,t)=>e-t),xMin=r[0],xMax=r[r.length-1],yMin=o[0],yMax=o[o.length-1],zMin=a[0],zMax=a[a.length-1],centerX=(xMax-xMin)/2+xMin,centerY=(yMax-yMin)/2+yMin,centerZ=(zMax-zMin)/2+zMin,e=Math.max(xMax,Math.abs(xMin)),t=Math.max(yMax,Math.abs(yMin)),vTarg=Math.max(e,t)}function drawGrid(){push();let e=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2),t=bkGridDrawBoundsX+e,r=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2),o=bkGridDrawBoundsY+r,a=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2),s=bkGridDrawBoundsZ+a;if(stroke(0,0,0),strokeWeight(1),0==ignX)for(let n=r;n<=o;n++)for(let r=a;r<=s;r++)line(rg.gPts[e][n][r].x,rg.gPts[e][n][r].y,rg.gPts[e][n][r].z,rg.gPts[t][n][r].x,rg.gPts[t][n][r].y,rg.gPts[t][n][r].z);if(0==ignY)for(let n=e;n<=t;n++)for(let e=a;e<=s;e++)line(rg.gPts[n][r][e].x,rg.gPts[n][r][e].y,rg.gPts[n][r][e].z,rg.gPts[n][o][e].x,rg.gPts[n][o][e].y,rg.gPts[n][o][e].z);if(0==ignZ)for(let n=e;n<=t;n++)for(let e=r;e<=o;e++)line(rg.gPts[n][e][a].x,rg.gPts[n][e][a].y,rg.gPts[n][e][a].z,rg.gPts[n][e][s].x,rg.gPts[n][e][s].y,rg.gPts[n][e][s].z);pop()}function windowResized(){DIM=min(windowWidth,windowHeight),resizeCanvas(DIM,DIM)}function setLineDash(e){drawingContext.setLineDash(e)}function dash_line(e,t,r,o,a,s,n,c){let i=createVector(e,t,r),l=createVector(o,a,s),m=p5.Vector.sub(l,i),d=m.mag(),h=int(d/(n+c));push(),translate(e,t,r);let g=m.copy().setMag(n),f=m.copy().setMag(n+c);for(let e=0;e<h;e++)line(0,0,0,g.x,g.y,g.z),translate(f.x,f.y,f.z);pop()}function updateCam(){for(push(),rotateZ(cam[2]),rotateY(cam[1]),push(),i=0;i<steps;i++)0==renderPattern[i]?(1==mobile?texture(txG):texture(myImg),model(goModels[i])):1==renderPattern[i]||(2==renderPattern[i]?(noStroke(),fill(255),model(goModels[i]),noFill()):3==renderPattern[i]?(stroke(0),strokeWeight(1),noFill(),model(goModels[i]),noStroke()):4==renderPattern[i]?(stroke(0),strokeWeight(1),fill(255),model(goModels[i]),noStroke(),noFill()):5==renderPattern[i]?(1==mobile?texture(txG):texture(myImg),stroke(0),strokeWeight(1),model(goModels[i]),noStroke()):(noStroke(),1==mobile?texture(txG):texture(myImg),model(goModels[i])));if(pop(),1==BKGRID&&drawGrid(),pop(),ratio>0&&ratio<1){ratio>=.99999&&(ratio=1),zoom=lerp(zoomStart,zoomTarg,ratio),cam[0]=lerp(camStart[0],camTarg[0],ratio),cam[1]=lerp(camStart[1],camTarg[1],ratio),cam[2]=lerp(camStart[2],camTarg[2],ratio),v=lerp(vStart,vTarg,ratio);let e=1-ratio;ratio+=e*easing,1==camZoomInit&&(ratio=.99999,zoom=defaultZoom/2,camZoomInit=!1)}ortho(-v*zoom,v*zoom,-v*zoom,v*zoom,-1e4,1e4)}function pointRotateY(e,t){let r=new p5.Vector;return r.x=e.z*Math.sin(t)+e.x*Math.cos(t),r.y=e.y,r.z=e.z*Math.cos(t)-e.x*Math.sin(t),r}function pointRotateZ(e,t){let r=new p5.Vector;return r.x=e.x*Math.cos(t)-e.y*Math.sin(t),r.y=e.x*Math.sin(t)+e.y*Math.cos(t),r.z=e.z,r}function reflect3d(e,t){let r=new p5.Vector(0,0,0),o=new Face(t.facePts[0],t.facePts[1],t.facePts[2]),a=new p5.Vector(o.facePts[0].x,o.facePts[0].y,o.facePts[0].z),s=p5.Vector.sub(o.facePts[1],o.facePts[0]),n=p5.Vector.sub(o.facePts[2],o.facePts[0]),c=n.cross(s);if(c.normalize(),gTestPV0=a,gTestPV1=s,gTestPV2=n,0==e.dist(o.facePts[0])||0==e.dist(o.facePts[1])||0==e.dist(o.facePts[2]))r.x=e.x,r.y=e.y,r.z=e.z;else{let t=p5.Vector.sub(e,o.facePts[0]),s=Math.abs(t.angleBetween(c)),n=t.cross(c);n.normalize(),n.mult(20),testCross1=new p5.Vector(n.x,n.y,n.z),n.normalize();let i=c.cross(n);i.normalize(),i.mult(t.mag()*sin(s)),c.normalize(),c.mult(t.mag()*cos(s));let l=new p5.Vector(c.x,c.y,c.z);l.mult(-1),r.x=l.x,r.y=l.y,r.z=l.z,retV1=new p5.Vector(r.x,r.y,r.z),r.add(i),retV2=new p5.Vector(r.x,r.y,r.z),r.add(a),retV3=new p5.Vector(r.x,r.y,r.z)}return r}function scale3d(e,t,r){let o=new p5.Vector(0,0,0);return o.x=e.x+-1*t.x,o.y=e.y+-1*t.y,o.z=e.z+-1*t.z,o.x=o.x*r,o.y=o.y*r,o.z=o.z*r,o.x=o.x+t.x,o.y=o.y+t.y,o.z=o.z+t.z,o}function vertex_average(e){let t=new p5.Vector(0,0,0);for(let r=0;r<e.length;r++)t.x=t.x+e[r].x,t.y=t.y+e[r].y,t.z=t.z+e[r].z;let r=e.length;return t.x=t.x/r,t.y=t.y/r,t.z=t.z/r,t}document.oncontextmenu=(()=>!1);class Random{constructor(){this.useA=!1;let e=function(e){let t=parseInt(e.substr(0,8),16),r=parseInt(e.substr(8,8),16),o=parseInt(e.substr(16,8),16),a=parseInt(e.substr(24,8),16);return function(){t|=0,r|=0,o|=0,a|=0;let e=(t+r|0)+a|0;return a=a+1|0,t=r^r>>>9,r=o+(o<<3)|0,o=o<<21|o>>>11,o=o+e|0,(e>>>0)/4294967296}};this.prngA=new e(tokenData.hash.substr(2,32)),this.prngB=new e(tokenData.hash.substr(34,32));for(let e=0;e<1e6;e+=2)this.prngA(),this.prngB()}random_dec(){return this.useA=!this.useA,this.useA?this.prngA():this.prngB()}random_num(e,t){return e+(t-e)*this.random_dec()}random_int(e,t){return Math.floor(this.random_num(e,t+1))}}let R,R1,R2,R3,R4,R10,R11,grw;R=new Random,R1=new Random,R2=new Random,R3=new Random,R4=new Random,R10=new Random,R11=new Random;class Category{constructor(e=[{name:"default",chance:1,amount:1,min:0,max:1}]){this.count=500,this.arr=e,this.select={}}setByAmount(){let e=0;for(let t=0;t<this.arr.length;t++)e+=this.arr[t].amount;this.count=e;for(let e=0;e<this.arr.length;e++)this.arr[e].chance=this.arr[e].amount/this.count}setByChance(e=this.count){let t=0;for(let e=0;e<this.arr.length;e++)t+=this.arr[e].chance;if(t>=.9999999999&&t<=1.00000000001)for(let e=0;e<this.arr.length;e++)this.arr[e].amount=this.arr[e].chance*this.count;else console.log("Improper Sum: "+t)}sum(){let e=[],t=[];t.push(0);for(let r=0;r<this.arr.length;r++)e.push(this.arr[r].chance),t.push(this.arr[r].chance);t.pop(),e=partialSum(e),t=partialSum(t);for(let r=0;r<this.arr.length;r++)this.arr[r].min=t[r],this.arr[r].max=e[r]}pickCategory(){let e,t=R.random_dec();for(let r=0;r<this.arr.length;r++)this.arr[r].min<=t&&t<this.arr[r].max&&(e=this.arr[r].name);return this.select={name:e,value:t},{name:e,value:t}}setCategory(e){let t,r=0;for(let r=0;r<this.arr.length;r++)e==this.arr[r].name&&(t=this.arr[r].name);return this.select={name:t,value:r},{name:t,value:r}}setCategoryValue(e){let t,r;for(let o=0;o<this.arr.length;o++)this.arr[o].min<=e&&e<this.arr[o].max&&(r=this.arr[o].name,t=e);return this.select={name:r,value:t},{name:r,value:t}}}let currGo,currFace,currPoint,targetPt,go=[],resetGo=[],goDepot=[],resetDepot=[],steps=0,currArraySize=0,zflag=0,sun=new p5.Vector(1,-1,1);sun.normalize();let geom,timer,img,centerX,centerY,centerZ,xMin,xMax,yMin,yMax,zMin,zMax,goNum,rand,rand1,rand2,rand3,zoomRR,num,myAngle=0,mGo=0,goModels=[],goModelsDepot=[],delay=3,bBox=[],currCluster=0,grow=1,initGrow=!0;var DEFAULT_SIZE=1400,WIDTH=window.innerWidth,HEIGHT=window.innerHeight,DIM=Math.min(WIDTH,HEIGHT),M=DIM/DEFAULT_SIZE;let myImg,canvas,shaderA,rg,patternSelect,bkImg,shaderBK,bkUniform,Lstring="ffff+fff",shad_Size=512,drawTex=!0,UNI=["LF1","LF2","LR1","LR2","dA1","dA2","df1","df2","wb1","wb2","bb1","bb2","Nf1","Nf2","Nn1","Nn2","Nx1","Nx2","indx","Ld","cBlend"],sG=10,UNIVAR=[[[54.64+sG,49.324+sG,40.324+sG,50+sG],[80.48+sG,0],[1.57079632679,-.788,-.788,-4.668],[3.604,0],[2,100.16,100.16,2.88],[2.88,0],[147.2,516.8,516.8,589.6],[589.6,0],[3.424,4.816,4.816,4.056],[3.592,0],[1.484,.86,.86,.86],[.86,0],[40,43.752,41.752,24.216],[0,1.2],[-.02,-.26,-.26,.1],[0,0],[.304,.376,.376,.376],[0,1],1,[0,0,0,0],.796],[[52.696+sG,54.324+sG,55.324+sG,62.392+sG],[80.48+sG,0],[0,.796,1.64,3.196],[5.332,5],[11.712,100.16,100.16,2.88],[2.88,0],[247.2,516.8,516.8,589.6],[589.6,0],[2.904,3.608,3.192,3.224],[3.592,0],[1.484,.86,.86,.86],[.86,0],[16.376,35.832,36.136,3.312],[4.152,-1.152],[0,.22,-.124,.1],[.1,.1],[0,.4,.56,1.128],[1.128,1],2,[0,0,0,0],.796],[[54.64+sG,49.324+sG,49.324+sG,49.284+sG],[80.48+sG,0],[0,1.58,4.548,2.316],[3.604,0],[11.712,100.16,100.16,98.696],[2.88,0],[247.2,516.8,516.8,621.6],[589.6,0],[3.488,3.088,3.056,3.848],[3.592,0],[1.484,.86,.86,.86],[.86,0],[16.376,35.832,36.136,36.136],[4.152,-1.5],[-0,-.26,-.124,-.124],[.1,.1],[.4,.4,.56,.592],[1.128,1],3,[0,0,0,0],.796],[[60.32+sG,49.324+sG,49.324+sG,49.284+sG],[80.408+sG,0],[2.227,.836,6.828,2.316],[3.932,0],[11.632,11.256,100.16,98.696],[2.88,0],[553.6,290.4,516.8,621.6],[589.6,0],[2.92,3.84,3.712,3.88],[2.832,0],[.276,1.188,.86,.86],[.86,0],[16.376,35.832,36.136,36.136],[4.152,.7],[.388,.212,-.124,-.124],[.1,.1],[1.024,.424,.56,.592],[1.544,1],4,[-.168,2.336,1.506,.952],.81],[[53.72+sG,46.468+sG,49.324+sG,49.284+sG],[50.352+sG,0],[3.963,2.032,6.876,.1],[2.604,0],[13.384,11.112,100.16,98.696],[3.24,0],[487.2,290.4,516.8,621.6],[589.6,0],[2.696,2.808,2.488,2.96],[1.464,0],[.196,1.188,.9,.86],[.86,0],[16.376,35.832,24.264,33.872],[3.2,-.8],[.572,.212,-.124,-.124],[-.084,.05],[.976,.656,.48,.592],[1.816,.9],5,[.63,.378,.601,3.632],.924],[[58.408+sG,46.468+sG,53.916+sG,51.336+sG],[40.424+sG,0],[4.707,1.104,6.676,2.596],[2.98,0],[12.208,10.12,100.16,98.704],[2.88,0],[578.4,290.4,516.8,621.6],[589.6,0],[1.156,2.376,2.376,2.168],[2.208,0],[.708,1.188,.86,.86],[.86,0],[18.168,40.832,25,3.136],[3.112,1.112],[.108,.212,-.124,-.116],[.1,.1],[1.304,.512,.56,1.072],[1.104,1.104],6,[0,0,0,0],.796],[[60.32+sG,60.324+sG,61.692+sG,61.336+sG],[50.424+sG,0],[2.091,.796,4.724,2.596],[4.788,0],[18.376,10.544,100.16,98.704],[2.88,0],[553.6,444,516.8,621.6],[589.6,0],[1.616,2.28,2.72,2.312],[1.776,0],[1.484,1.188,.86,.86],[.86,0],[16.744,35.832,36.136,3.136],[4.336,0],[.388,.212,-.508,-.124],[.1,0],[1.096,1.248,1.36,.592],[1.768,0],7,[0,0,0,0],.796],[[60.32+sG,80.324+sG,51.692+sG,60.368+sG],[1+sG,0],[6.427,1.012,6.828,4.836],[1,0],[11.632,10.056,100.16,98.696],[4,0],[553.6,444,516.8,621.6],[.4,0],[1.44,.92,2.256,2.024],[.2,0],[1.484,1.188,.86,.86],[.2,0],[16.16,35.832,36.136,3.136],[.1,0],[.388,.212,-.508,-.124],[0,0],[1.096,1.248,1.784,.496],[0,0],8,[0,0,0,0],.796]],gBorder=1,gScale=20,gVals=7+gBorder,growth_Max=7,growth_percent=.5,growth_type_ratio=.5,small_death_chance=.1,BKGRID=!1,bkGridTrueMax=27,bkGridDrawBoundsX=11,bkGridDrawBoundsY=11,bkGridDrawBoundsZ=11,pS=1,BKTEXT=!1,bkrez=2048,bkSCALE=250,bkrot=0,bkfreq=0,bkamp=0,bkNscale=0,bkNmin=0,bkNmax=0,pattDirector=[],pattOrgClust=[[0,0,-1],[1,2,0],[2,2,0],[4,2,0],[5,2,0],[7,2,0],[3,2,1],[4,3,1],[6,2,1],[7,2,1]],pattOrgBranch=[[1,3,3],[2,4,3],[1,4,3],[1,3,3],[2,4,3],[1,4,3],[1,5,1],[1,6,1],[1,7,1],[2,5,1],[3,4,1]],pattOrgLoop=[[4,4,1],[4,5,1],[5,4,1],[5,5,1],[6,5,1],[7,3,1],[7,4,1]],pattOrgLine=[[8,3,3],[8,4,3],[8,3,3],[8,4,3],[8,3,3],[8,4,3],[8,5,1],[8,6,1],[8,7,1]],pattOrgHole=[[10,0,-1],[10,0,-1],[10,0,-1],[2,3,1],[4,4,1],[6,3,1]],pattOrgPT=[[9,0,-1],[9,0,-1],[9,0,-1],[9,0,-1],[9,0,-1],[9,0,-1],[9,0,0],[9,0,0],[9,0,0],[9,0,0],[9,0,0],[9,0,0],[9,0,1]],ERASE=!1,WIREFRAME=!1,OPAQUE=!1,scale_lib=[{name:"fit",chance:.8},{name:"zoom",chance:.2}],colr_lib=[{name:"warm",chance:.55},{name:"cool",chance:.15},{name:"grey",chance:.2},{name:"white",chance:.1}],bkgd_lib=[{name:"blank",chance:.3},{name:"grid lattice",chance:.15},{name:"linear hatch",chance:.07},{name:"noise hatch",chance:.08},{name:"cross hatch",chance:.1},{name:"stipple hatch",chance:.1},{name:"dark hatch",chance:.2}],patt_lib=[{name:"cluster",chance:.55},{name:"branch",chance:.1},{name:"loop",chance:.05},{name:"hole",chance:.1},{name:"line",chance:.1},{name:"point",chance:.1}],frac_lib=[{name:"minimal",chance:.01},{name:"shallow",chance:.3},{name:"medium",chance:.36},{name:"deep",chance:.33}],scat_lib=[{name:"none",chance:.5},{name:"fragmented",chance:.5}],rndr_lib=[{name:"complete",chance:.9},{name:"proof",chance:.1}],scale_cat=new Category(scale_lib);scale_cat.setByChance(),scale_cat.sum();let colr_cat=new Category(colr_lib);colr_cat.setByChance(),colr_cat.sum();let bkgd_cat=new Category(bkgd_lib);bkgd_cat.setByChance(),bkgd_cat.sum();let frac_cat=new Category(frac_lib);frac_cat.setByChance(),frac_cat.sum();let patt_cat=new Category(patt_lib);patt_cat.setByChance(),patt_cat.sum();let scat_cat=new Category(scat_lib);scat_cat.setByChance(),scat_cat.sum();let rndr_cat=new Category(rndr_lib);rndr_cat.setByChance(),rndr_cat.sum();let scale_f=scale_cat.pickCategory().name,colr_f=colr_cat.pickCategory().name,bkgd_f=bkgd_cat.pickCategory().name,frac_f=frac_cat.pickCategory().name,patt_f=patt_cat.pickCategory().name,scat_f=scat_cat.pickCategory().name,rndr_f=rndr_cat.pickCategory().name,run_animation=!0,DECORATE=!0,prtScn=!1,swap=!1,camZoomInit=!0,mobile=!1;WIDTH=window.innerWidth,HEIGHT=window.innerHeight;2400==window.innerWidth&&2400==window.innerHeight&&(run_animation=!1),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(run_animation=!1,mobile=!0);let color0,color1,color2,hR,sR,bR,ZoomPercent=scale_lib[1].chance*Math.PI;if(colr_f==colr_cat.arr[0].name){let e=R.random_dec();e<.9?hR=R11.random_num(30,65):(hR=R.random_int(0,105)-40,hR<0&&(hR+=360)),sR=R.random_int(6,15),bR=R.random_int(78,100)}else colr_f==colr_cat.arr[1].name?(hR=R.random_int(65,320),sR=R.random_int(6,15),bR=R.random_int(78,100)):colr_f==colr_cat.arr[2].name?(hR=R.random_int(0,360),sR=R.random_int(0,2),bR=R.random_int(78,94)):colr_f==colr_cat.arr[3].name&&(hR=R.random_int(0,360),sR=R.random_int(0,1),bR=R.random_int(96,100));if(bkgd_f==bkgd_cat.arr[0].name?(BKTEXT=!1,BKGRID=!1,bkUniform=[[0,0,0,0],[0,0],[0,0,0,0],[0,0],[0,100.16,100.16,2.88],[2.88,0],[0,.2,516.8,516.8,589.6],[589.6,0],[4.5,4.816,4.816,4.056],[3.592,0],[4.35,.86,.86,.86],[.86,0],[0,43.752,41.752,24.216],[0,1.2],[0,-.26,-.26,.1],[0,0],[0,.376,.376,.376],[0,1],1,[0,0,0,0],.796]):bkgd_f==bkgd_cat.arr[1].name?(BLTEXT=!1,BKGRID=!0,bkUniform=[[0,0,0,0],[0,0],[0,0,0,0],[0,0],[0,100.16,100.16,2.88],[2.88,0],[0,.2,516.8,516.8,589.6],[589.6,0],[4.5,4.816,4.816,4.056],[3.592,0],[4.35,.86,.86,.86],[.86,0],[0,43.752,41.752,24.216],[0,1.2],[0,-.26,-.26,.1],[0,0],[0,.376,.376,.376],[0,1],1,[0,0,0,0],.796]):bkgd_f==bkgd_cat.arr[2].name?(BKTEXT=!0,BKGRID=!1,bkrot=R.random_int(0,7)*Math.PI/4,bkfreq=0,bkamp=150,bkNscale=0,bkNmin=.65,bkNmax=.651,bkUniform=[[bkSCALE,0,0,0],[0,0],[bkrot,0,0,0],[0,0],[bkfreq,100.16,100.16,2.88],[2.88,0],[bkamp,.2,516.8,516.8,589.6],[589.6,0],[4.5,4.816,4.816,4.056],[3.592,0],[4.35,.86,.86,.86],[.86,0],[bkNscale,43.752,41.752,24.216],[0,1.2],[bkNmin,-.26,-.26,.1],[0,0],[bkNmax,.376,.376,.376],[0,1],1,[0,0,0,0],.796],bkgd_f="linear hatch"):bkgd_f==bkgd_cat.arr[3].name?(BKTEXT=!0,BKGRID=!1,bkSCALE=200,bkrot=R.random_int(0,7)*Math.PI/4,bkfreq=0,bkamp=150,bkNscale=bkSCALE/4,bkNmin=.3,bkNmax=.651,bkUniform=[[bkSCALE,0,0,0],[0,0],[bkrot,0,0,0],[0,0],[bkfreq,100.16,100.16,2.88],[2.88,0],[bkamp,.2,516.8,516.8,589.6],[589.6,0],[4.5,4.816,4.816,4.056],[3.592,0],[30,.86,.86,.86],[.86,0],[bkNscale,43.752,41.752,24.216],[0,1.2],[bkNmin,-.26,-.26,.1],[0,0],[bkNmax,.376,.376,.376],[0,1],1,[0,0,0,0],.796],bkgd_f="linear hatch"):bkgd_f==bkgd_cat.arr[4].name?(BKTEXT=!0,BKGRID=!1,bkSCALE=200,bkrot=R.random_int(0,7)*Math.PI/4,bkfreq=0,bkamp=150,bkNscale=bkSCALE/4,bkNmin=.3,bkNmax=.651,bkUniform=[[bkSCALE,bkSCALE,0,0],[0,0],[bkrot,bkrot+Math.PI/4*R.random_int(1,3),0,0],[0,0],[bkfreq,0,100.16,2.88],[2.88,0],[bkamp,.2,516.8,516.8,589.6],[589.6,0],[4.5,4.816,4.816,4.056],[3.592,0],[30,.86,.86,.86],[.86,0],[bkNscale,bkNscale,41.752,24.216],[0,1.2],[bkNmin,bkNmin,-.26,.1],[0,0],[bkNmax,bkNmax,.376,.376],[0,1],1,[0,0,0,0],.796],bkgd_f="cross hatch"):bkgd_f==bkgd_cat.arr[5].name?(BKTEXT=!0,BKGRID=!1,bkUniform=UNIVAR[R.random_int(1,2)],bkgd_f="cross hatch"):bkgd_f==bkgd_cat.arr[6].name&&(BKTEXT=!0,BKGRID=!1,bkUniform=UNIVAR[R.random_int(6,7)]),patt_f==patt_cat.arr[0].name){let e,t=R.random_dec();t<=.6?e=0:(e=pattOrgClust.length-1,e=R.random_int(1,e)),pattDirector=pattOrgClust[e]}else if(patt_f==patt_cat.arr[1].name){let e=pattOrgBranch.length-1;e=R.random_int(0,e),pattDirector=pattOrgBranch[e]}else if(patt_f==patt_cat.arr[2].name){let e=pattOrgLoop.length-1;e=R.random_int(0,e),pattDirector=pattOrgLoop[e]}else if(patt_f==patt_cat.arr[3].name){let e=pattOrgHole.length-1;e=R.random_int(0,e),pattDirector=pattOrgHole[e]}else if(patt_f==patt_cat.arr[4].name){let e=pattOrgLine.length-1;e=R.random_int(0,e),pattDirector=pattOrgLine[e]}else if(patt_f==patt_cat.arr[5].name){let e=pattOrgPT.length-1;e=R.random_int(0,e),pattDirector=pattOrgPT[e],Lstring="ffff+fff+ff+fff+f+fff+f+ffff+ff"}if(pS=pattDirector[1],1==pattDirector[2])frac_f=frac_cat.arr[0].name;else if(0==pattDirector[2]){let e=R.random_dec();frac_f=e<=.5?frac_cat.arr[3].name:frac_cat.arr[2].name}else-1==pattDirector[2]||2==pattDirector[2]||3==pattDirector[2]&&(frac_f=frac_cat.arr[1].name);if(frac_f==frac_cat.arr[0].name?(growth_Max=10,growth_percent=.8,growth_type_ratio=.5,small_death_chance=.2):frac_f==frac_cat.arr[1].name?(growth_Max=6,growth_percent=.7,growth_type_ratio=.5,small_death_chance=.15):frac_f==frac_cat.arr[2].name?(growth_Max=1,growth_percent=0,growth_type_ratio=.5,small_death_chance=.1):frac_f==frac_cat.arr[3].name&&(growth_Max=2,growth_percent=.6,growth_type_ratio=.5,small_death_chance=.04),scat_f==scat_cat.arr[0].name||scat_f==scat_cat.arr[1].name&&(ERASE=!0),rndr_f==rndr_cat.arr[0].name);else if(rndr_f==rndr_cat.arr[1].name){let e=R.random_dec();e<.5?WIREFRAME=!0:OPAQUE=!0}let growthPts=[[{x:0,y:0,z:0},{x:R.random_int(1,Math.floor(growth_Max/2))+Math.floor(growth_Max/2),y:R.random_int(1,growth_Max-1),z:R.random_int(1,growth_Max-1)}],[{x:0,y:0,z:0},{x:0,y:pS,z:0},{x:0,y:pS,z:pS},{x:0,y:pS,z:0},{x:pS,y:pS,z:0}],[{x:0,y:0,z:0},{x:0,y:pS,z:0},{x:0,y:pS,z:pS},{x:0,y:pS,z:0},{x:pS,y:pS,z:0},{x:0,y:pS,z:0},{x:pS,y:0,z:0}],[{x:0,y:0,z:0},{x:0,y:pS,z:0},{x:0,y:-pS,z:0},{x:0,y:0,z:0},{x:pS,y:0,z:0},{x:-pS,y:0,z:0},{x:0,y:0,z:0},{x:0,y:0,z:pS},{x:0,y:0,z:pS}],[{x:0,y:0,z:0},{x:0,y:pS,z:0},{x:pS,y:pS,z:0},{x:pS,y:0,z:0},{x:0,y:0,z:0}],[{x:0,y:0,z:0},{x:0,y:0,z:pS},{x:0,y:pS,z:pS},{x:0,y:pS,z:0},{x:0,y:0,z:0}],[{x:0,y:0,z:0},{x:0,y:0,z:pS},{x:pS,y:0,z:pS},{x:pS,y:0,z:0},{x:0,y:0,z:0}],[{x:0,y:0,z:0},{x:0,y:pS,z:0},{x:pS,y:pS,z:pS},{x:pS,y:0,z:pS},{x:0,y:0,z:0}],[{x:0,y:0,z:0},{x:pS,y:pS,z:pS}],[{x:0,y:0,z:0},{x:1,y:1,z:1}],[{x:0,y:0,z:0},{x:2,y:2,z:2},{x:0,y:1,z:0},{x:0,y:0,z:0},{x:0,y:0,z:0},{x:0,y:1,z:0},{x:0,y:0,z:0}]];patternSelect=growthPts[pattDirector[0]],UNIVAR.push(bkUniform);let xGridMax=-1e3,yGridMax=-1e3,zGridMax=-1e3;for(i=0;i<patternSelect.length;i++)patternSelect[i].x>=xGridMax&&(xGridMax=patternSelect[i].x),patternSelect[i].y>=yGridMax&&(yGridMax=patternSelect[i].y),patternSelect[i].z>=zGridMax&&(zGridMax=patternSelect[i].z);bkGridDrawBoundsX=xGridMax+5,bkGridDrawBoundsY=yGridMax+5,bkGridDrawBoundsZ=zGridMax+5;let ignX=!1,ignY=!1,ignZ=!1,ignR=R.random_dec();for(ignR<=.33?ignX=!0:ignR>=.66?ignY=!0:ignZ=!0,i=0;i<patternSelect.length;i++)patternSelect[i].x+=Math.floor(bkGridTrueMax/2),patternSelect[i].y+=Math.floor(bkGridTrueMax/2),patternSelect[i].z+=Math.floor(bkGridTrueMax/2);let bkG,txG,dSX=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2),dFX=bkGridDrawBoundsX+dSX,dSY=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2),dFY=bkGridDrawBoundsY+dSY,dSZ=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2),dFZ=bkGridDrawBoundsZ+dSZ,renderPattern=[],zoomRRR=R4.random_num(0,1);zoomRR=R4.random_num(0,Math.PI),scale_f=scale_cat.arr[0].name,Math.abs((myAngle+zoomRR)%Math.PI)<=ZoomPercent&&(scale_f=scale_cat.arr[1].name,zoomRR=0);let bkS,txS,txW=2048,txH=256,txSr=2048,display={"Growth Pattern":patt_f,"Fractal Depth":frac_f,Fragmentation:scat_f,Completeness:rndr_f,Background:bkgd_f,Scale:scale_f,"Paper Color":colr_f};console.log("primatives by ArandaLasch"),console.log("Benjamin Aranda, Jesse Bassett, Joaquin Bonifaz, Chris Lasch"),console.log(" "),console.log("Growth Pattern: "+patt_f),console.log("Fractal Depth:  "+frac_f),console.log("Broken/scatter: "+scat_f),console.log("Completness:    "+rndr_f),console.log("Scale:          "+scale_f),console.log("Background:     "+bkgd_f),console.log("Paper Color:    "+colr_f),window.addEventListener("keydown",function(e){["Space","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].indexOf(e.code)>-1&&e.preventDefault()},!1)
;let resetPt,resetTarg,basicVert="\n  attribute vec3 aPosition;\n  attribute vec2 aTexCoord;\n  varying vec2 vTexCoord;\n  void main() {\n    vTexCoord=aTexCoord;\n    vec4 positionVec4=vec4(aPosition,1.0);\n    positionVec4.xy=positionVec4.xy*2.0-1.0;\n    gl_Position=positionVec4;\n  }\n  ",basicVert2="\n  attribute vec3 aPosition;\n  attribute vec2 aTexCoord;\n  varying vec2 vTexCoord;\n  uniform mat4 uModelViewMatrix;\n  uniform mat4 uProjectionMatrix;\n  void main() {\n    vTexCoord = aTexCoord;\n    vec4 positionVec4 = vec4(aPosition, 1.0);\n    gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  }\n",fragShaderA="\n//Author:Jesse Bassett\n#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec2 vTexCoord; varying vec4 Depth; uniform vec4 LF1; uniform vec2 LF2; uniform vec4 LR1; uniform vec2 LR2; uniform vec4 dA1; uniform vec2 dA2; uniform vec4 df1; uniform vec2 df2; uniform vec4 wb1; uniform vec2 wb2; uniform vec4 bb1; uniform vec2 bb2; uniform vec4 Nf1; uniform vec2 Nf2; uniform vec4 Nn1; uniform vec2 Nn2; uniform vec4 Nx1; uniform vec2 Nx2; uniform float indx; uniform vec4 Ld; uniform float cBlend; \n#define BlendScreen(base,blend) (1.0-((1.0-base)*(1.0-blend)))\nvec3 mod289(vec3 x) {return x-floor(x*(1.0 / 289.0))*289.0;} vec2 mod289(vec2 x) {return x-floor(x*(1.0 / 289.0))*289.0;} vec3 permute(vec3 x) {return mod289(((x*34.0)+1.0)*x);} float snoise(vec2 v) {const vec4 C=vec4(0.211324865405187,0.366025403784439,-0.577350269189626,0.024390243902439); vec2 i=floor(v+dot(v,C.yy)); vec2 x0=v-i+dot(i,C.xx); vec2 i1=vec2(0.0); i1=(x0.x > x0.y)? vec2(1.0,0.0):vec2(0.0,1.0); vec2 x1=x0.xy+C.xx-i1; vec2 x2=x0.xy+C.zz; i=mod289(i); vec3 p=permute(permute(i.y+vec3(0.0,i1.y,1.0))+i.x+vec3(0.0,i1.x,1.0)); vec3 m=max(0.5-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2)),0.0); m=m*m; m=m*m; vec3 x=2.0*fract(p*C.www)-1.0; vec3 h=abs(x)-0.5; vec3 ox=floor(x+0.5); vec3 a0=x-ox; m*=1.79284291400159-0.85373472095314*(a0*a0+h*h); vec3 g=vec3(0.0); g.x=a0.x*x0.x+h.x*x0.y; g.yz=a0.yz*vec2(x1.x,x2.x)+h.yz*vec2(x1.y,x2.y); return 130.0*dot(m,g);} vec2 rotateUV(vec2 uv,float rotation) {return vec2(cos(rotation)*(uv.x-0.5)+sin(rotation)*(uv.y-0.5)+0.5,cos(rotation)*(uv.y-0.5)-sin(rotation)*(uv.x-0.5)+0.5);} float SmoothStep(float edge0,float edge1,float x){float t=clamp((x-edge0) / (edge1-edge0),0.0,1.0); return t;} void main() {vec2 st=vTexCoord; vec2 st_1=st; vec2 st_2=st; vec2 st_3=st; vec2 st_4=st; vec2 st_5=st; vec2 st_6=st; vec3 color=vec3(0.0); st_1=rotateUV(st,LR1.x); st_1.x+=cos(st_1.y*dA1.x)/df1.x; st_1.y+=sin(st_1.x*dA1.x)/df1.x; float pos_1=st_1.x*LF1.x; float y=0.; float x=pos_1; y=sin((x+Ld.z)*Ld.y); y+=sin((x+Ld.z)*Ld.y*2.1+Ld.w)*4.5; y+=sin((x+Ld.z)*Ld.y*1.72+Ld.w*1.121)*4.0; y+=sin((x+Ld.z)*Ld.y*2.221+Ld.w*0.437)*5.0; y+=sin((x+Ld.z)*Ld.y*3.1122+Ld.w*4.269)*2.5; y*=Ld.x*0.06; pos_1=pos_1+y; float colL_1=wb1.x*bb1.x*((cos(pos_1*2.*3.14)+1.)/2.)-bb1.x+1.; float colLC_1=clamp(colL_1,0.090,1.0); vec2 posN_1=st*Nf1.x; float colN_1=(snoise(posN_1)*.5+.5); float colNC_1=smoothstep(Nn1.x,Nx1.x,colN_1); st_2=rotateUV(st_2,LR1.y); st_2.x+=cos(st_2.y*dA1.y)/df1.y; st_2.y+=sin(st_2.x*dA1.y)/df1.y; float pos_2=st_2.x*LF1.y; float colL_2=wb1.y*bb1.y*((cos(pos_2*2.*3.14)+1.)/2.)-bb1.y+1.; float colLC_2=clamp(colL_2,0.090,1.0); vec2 posN_2=st_2*Nf1.y; float colN_2=(snoise(posN_2)*.5+.5); float colNC_2=smoothstep(Nn1.y,Nx1.y,colN_2); st_3=rotateUV(st_3,LR1.z); st_3.x+=cos(st_3.y*dA1.z)/df1.z; st_3.y+=sin(st_3.x*dA1.z)/df1.z; float pos_3=st_3.x*LF1.z; float colL_3=wb1.z*bb1.z*((cos(pos_3*2.*3.14)+1.)/2.)-bb1.z+1.; float colLC_3=clamp(colL_3,0.090,1.0); vec2 posN_3=st_3*Nf1.z; float colN_3=(snoise(posN_3)*.5+.5); float colNC_3=smoothstep(Nn1.z,Nx1.z,colN_3); st_4=rotateUV(st_4,LR1.w); st_4.x+=cos(st_4.y*dA1.w)/df1.w; st_4.y+=sin(st_4.x*dA1.w)/df1.w; float pos_4=st_4.x*LF1.w; float colL_4=wb1.w*bb1.w*((cos(pos_4*2.*3.14)+1.)/2.)-bb1.w+1.; float colLC_4=clamp(colL_4,0.090,1.0); vec2 posN_4=st_4*Nf1.w; float colN_4=(snoise(posN_4)*.5+.5); float colNC_4=smoothstep(Nn1.w,Nx1.w,colN_4); st_5=rotateUV(st_5,LR2.x); st_5.x+=cos(st_5.y*dA2.x)/df2.x; st_5.y+=sin(st_5.x*dA2.x)/df2.x; float pos_5=st_5.x*LF2.x; float colL_5=wb2.x*bb2.x*((cos(pos_5*2.*3.14)+1.)/2.)-bb2.x+1.; float colLC_5=clamp(colL_5,0.090,1.0); vec2 posN_5=st_5*Nf2.x; float colN_5=(snoise(posN_5)*.5+.5); float colNC_5=smoothstep(Nn2.x,Nx2.x,colN_5); vec2 posN_6=st_6*Nf2.y; float colN_6=(snoise(posN_6)*.5+.5); float colNC_6=smoothstep(Nn2.y,Nx2.y,colN_6); if(indx==1.0){colNC_5=colNC_5+colNC_2; colNC_4=colNC_4+colNC_3; colNC_1=0.108*(colNC_6-0.)+colNC_1; colNC_2=0.292*(colNC_6-0.)+colNC_2; colNC_3=-0.448*(-colNC_6+0.024)+colNC_3;}else if (indx==2.0){colNC_5=colNC_5+colNC_2; colNC_4=1.; colNC_3=0.664*colNC_6+colNC_3; colNC_2=1.664*colNC_6+colNC_2; colNC_1=1.;}else if (indx==3.0){colNC_5=colNC_5+colNC_3; colNC_4=0.032*colNC_6+colNC_4; colNC_3=0.712*colNC_6+colNC_3; colNC_1=0.672*colNC_6+colNC_1;}else if (indx==4.0){colNC_5=colNC_5+colNC_3; colNC_3=1.680*colNC_5+colNC_3-1.; colNC_4=0.784*colNC_6+colNC_4; colNC_3=0.736*colNC_6+colNC_3; colNC_1=-0.016*colNC_6+colNC_1;}else if (indx==5.0){colNC_5=colNC_5+colNC_3; colNC_4=0.016*colNC_6+colNC_4; colNC_3=0.000*colNC_6+colNC_3; colNC_2=0.328*colNC_6+colNC_2; colNC_1=0.992*(colNC_6-0.024)+colNC_1;}else if (indx==6.0){colNC_5=colNC_5+colNC_3;}else if (indx==7.0){colNC_5=colNC_5+colNC_3;}else if (indx==8.0){colNC_5=colNC_5+colNC_3;} float colB_1=BlendScreen(colNC_1,colLC_1); float colB_2=BlendScreen(colNC_2,colLC_2); float colB_3=BlendScreen(colNC_3,colLC_3); float colB_4=BlendScreen(colNC_4,colLC_4); float colB_5=BlendScreen(colNC_5,colLC_5); float colF_1=SmoothStep(cBlend,1.,colB_1); float colF_2=SmoothStep(cBlend,1.,colB_2); float colF_3=SmoothStep(cBlend,1.,colB_3); float colF_4=SmoothStep(cBlend,1.,colB_4); float colF_5=SmoothStep(cBlend,1.,colB_5); float colF=min(colF_1,colF_2); colF=min(colF,colF_3); colF=min(colF,colF_4); colF=min(colF,colF_5); color=vec3(colF); gl_FragColor=vec4(color,1.0);} ",angle=Math.PI/3,defaultZoom=1.15,zoom=1.15,zoomStart=1.15,zoomTarg=1.15,v=0,vStart=0,vTarg=0,ratio=0,camSpeed=.02,easing=.05,initCamAngle=R.random_int(0,5)*angle,cam=[initCamAngle.PI/6,initCamAngle,initCamAngle],camStart=[0,0,0],camTarg=[0,0,0],rx1=1+R.random_dec()/100,ry1=1+R.random_dec()/100,rz1=1+R.random_dec()/100,rx2=1+R.random_dec()/100,ry2=1+R.random_dec()/100,rz2=1+R.random_dec()/100,rx3=1+R.random_dec()/100,ry3=1+R.random_dec()/100,rz3=1+R.random_dec()/100;class Go3d{constructor(e,t,r,o,a,s,n,c,i,l){if(this.verts=[],this.faces=[],this.faceIndx=[],this.gScale=a,this.x=0,this.y=0,this.z=0,this.center=new p5.Vector,this.ballCenter1=new p5.Vector,this.ballCenter2=new p5.Vector,1==e){this.x=t,this.y=r,this.z=o,this.verts[0]=createVector(0,0,0),this.verts[1]=createVector(-.548,1.097,1.687),this.verts[2]=createVector(1.226,0,1.687),this.verts[3]=createVector(1.226,1.984,1.687),this.verts[4]=createVector(1.774,.887,0),this.verts[5]=createVector(0,1.984,0),this.verts[6]=createVector(-.548,-.887,1.688),this.verts[7]=createVector(1.774,2.87,-0);for(let e=0;e<this.verts.length;e++)this.verts[e].x=this.verts[e].x*this.gScale+this.x,this.verts[e].y=this.verts[e].y*this.gScale+this.y,this.verts[e].z=this.verts[e].z*this.gScale+this.z;this.faceIndx=[[0,1,2],[3,5,4],[0,5,1],[5,3,1],[1,3,2],[2,3,4],[0,2,4],[0,4,5]]}else if(2==e){let e,t=new Face(n.facePts[0],n.facePts[1],n.facePts[2]);e=c;for(let r=0;r<8;r++)this.verts[r]=reflect3d(e.verts[r],t);for(let t=0;t<8;t++)this.faceIndx.push([e.faceIndx[t][0],e.faceIndx[t][2],e.faceIndx[t][1]])}else if(3==e){let e=i,t=l,r=c;for(let o=0;o<8;o++)this.verts[o]=scale3d(r.verts[o],e,t);for(let e=0;e<8;e++)this.faceIndx.push([r.faceIndx[e][0],r.faceIndx[e][1],r.faceIndx[e][2]])}this.ballCenter1=this.verts[6],this.ballCenter2=this.verts[7],this.center=vertex_average([this.verts[0],this.verts[1],this.verts[2],this.verts[3],this.verts[4],this.verts[5]]);for(let e=0;e<8;e++){let t;t=e<2?"e":"i",this.faces.push(new Face(this.verts[this.faceIndx[e][0]],this.verts[this.faceIndx[e][1]],this.verts[this.faceIndx[e][2]],t))}}}class Grid_Rhomb{constructor(e,t,r,o){this.gPts=[],this.gIndx=[],this.vecNum=3,this.moveVectors=new p5.Vector(2*this.vecNum),this.moveVectorsIndx=new Array(2*this.vecNum),this.gVectors=new p5.Vector,this.w=e,this.h=t,this.l=r,this.gridScale=o,this.moveVectorSize=2*this.vecNum,this.gVectors=this.findDodecaVectors();for(let e=0;e<20;e++)this.gVectors[e].mult(2);this.moveVectors[0]=this.gVectors[0],this.moveVectors[1]=this.gVectors[1],this.moveVectors[2]=this.gVectors[10],this.moveVectors[3]=this.gVectors[17],this.moveVectors[4]=this.gVectors[18],this.moveVectors[5]=this.gVectors[8],this.moveVectorsIndx[0]=0,this.moveVectorsIndx[1]=1,this.moveVectorsIndx[2]=10,this.moveVectorsIndx[3]=17,this.moveVectorsIndx[4]=18,this.moveVectorsIndx[5]=8;for(let e=0;e<this.l;e++){this.gPts[e]=[],this.gIndx[e]=[];for(let t=0;t<this.w;t++){this.gPts[e][t]=[],this.gIndx[e][t]=[];for(let r=0;r<this.h;r++){let o=new p5.Vector(this.moveVectors[0].x,this.moveVectors[0].y,this.moveVectors[0].z),a=new p5.Vector(this.moveVectors[1].x,this.moveVectors[1].y,this.moveVectors[1].z),s=new p5.Vector(this.moveVectors[2].x,this.moveVectors[2].y,this.moveVectors[2].z),n=.5*this.w;o.mult((e-n)*this.gridScale),a.mult((t-n)*this.gridScale),s.mult((r-n)*this.gridScale);let c=new p5.Vector(0,0,0);c.add(o),c.add(a),c.add(s),this.gPts[e][t][r]=new p5.Vector(c.x,c.y,c.z),this.gIndx[e][t][r]=new p5.Vector(e,t,r)}}}}findDodecaVectors(){let e=[],t=[],r=52.6226359,o=10.81231754,a=1,s=PI*r/180,n=PI*o/180,c=PI*-o/180,i=PI*-r/180,l=72*PI/180,m=l/2,d=0,h=createVector(0,0,0);for(let e=0;e<5;e++)t[e]=[],t[e][0]=a*cos(d)*cos(s),t[e][1]=a*sin(d)*cos(s),t[e][2]=a*sin(s),t.push(h),d+=l;d=0;for(let e=5;e<10;e++)t[e]=[],t[e][0]=a*cos(d)*cos(n),t[e][1]=a*sin(d)*cos(n),t[e][2]=a*sin(n),d+=l;d=m;for(let e=10;e<15;e++)t[e]=[],t[e][0]=a*cos(d)*cos(c),t[e][1]=a*sin(d)*cos(c),t[e][2]=a*sin(c),d+=l;d=m;for(let e=15;e<20;e++)t[e]=[],t[e][0]=a*cos(d)*cos(i),t[e][1]=a*sin(d)*cos(i),t[e][2]=a*sin(i),d+=l;for(let r=0;r<20;r++)e.push(new p5.Vector(t[r][0],t[r][1],t[r][2]));return e}}class GrowSys{constructor(e){this.gens=e,this.gen1=0}growToTarget(e){let t=e,r=!0,o=currGo,a=o.verts[3].dist(o.verts[0]),s=0;for(;1==r;){s+=1,o=currGo;let e=o.center.dist(t);if(e>a&&s<199){let e=[];e=this.growByBall(o,t);let r,a=99,s=9999;for(let o=0;o<e.length;o++){let n=e[o];r=n.center.dist(t),r<s&&(s=r,a=o),go.push(n)}currGo=e[a]}else r=!1,go=this.remDups(go),this.gen1=go.length,1==DECORATE&&this.decorate(),go=this.remDups(go)}}growByBall(e,t){let r=[],o=e,a=t,s=99;return s=o.faces[0].center.dist(a)<=o.faces[1].center.dist(a)?0:1,r=this.render(Lstring,o,s),r}decorate(){let e=go.length;for(let t=0;t<=this.gens;t++){for(let t=currArraySize;t<e;t++){let e=[],r=0;if(rand=R.random_dec(),rand>growth_percent){let o,a=go[t];rand1=R1.random_dec(),rand1>growth_type_ratio?(o=a.ballCenter1,r=0):(o=a.ballCenter2,r=3);let s=0,n=go[0].center.dist(go[0].faces[0].center);for(let e=0;e<go.length;e++)go[e].center.dist(o)<n&&(s=1);if(0==s){go.push(new Go3d(3,void 0,void 0,void 0,void 0,void 0,void 0,a,o,.5)),a=go[go.length-1];let t=!0,s="",n=0;for(;1==t;){rand2=R2.random_dec();let e=small_death_chance;rand2>e?(s+="f",n+=1,n>=4&&(s+="+",n=0),rand3=R3.random_dec(),e=.98,rand3>e&&(s+="/",n=0)):t=!1}e=this.render(s,a,r),e=this.remDups(e),e=this.remFaces(e);for(let t=0;t<e.length;t++)go.push(e[t])}}}currArraySize=e,e=go.length}}remDups(e){for(let t=0;t<e.length;t++){let r=e[t];for(let o=0;o<e.length;o++)if(o!=t){let t;t=e[o],r.center.dist(t.center)<.1&&e.splice(o,1)}}return e}remFaces(e){for(let t=0;t<e.length;t++){e[t];for(let r=0;r<e.length;r++)if(r!=t)for(let o=0;o<e[t].faces.length;o++){let a=e[t].faces[o].center;for(let s=0;s<e[r].faces.length;s++)if(a.dist(e[r].faces[s].center)<.1){e[t].faces.splice(o,1),e[r].faces.splice(s,1);break}}}return e}render(e,t,r){let o,a=e,s=t,n=a.length,c=[],i=2;o=0==r?0:3;for(let e=0;e<n;e++){let t=a.charAt(e);if("f"==t){0==o?i=2==i?6:2:1==o?i=2==i?4:4==i?2:4:2==o?i=2==i?6:6==i?2:6:3==o?i=3==i?5:3:4==o&&(i=5==i?7:5),c.push(new Go3d(2,void 0,void 0,void 0,void 0,void 0,s.faces[i],s));let e=c[c.length-1];s=e}else"+"==t?o<3?(o+=1,o>2&&(o=0)):(o+=1,o>4&&(o=3)):"/"==t&&(o=o<3?3:0)}return c}}class Face{constructor(e,t,r,o){this.type=o,this.facePts=[],this.center=new p5.Vector,this.facePts[0]=createVector(e.x,e.y,e.z),this.facePts[1]=createVector(t.x,t.y,t.z),this.facePts[2]=createVector(r.x,r.y,r.z),this.center=vertex_average(this.facePts),this.normal=p5.Vector.sub(this.facePts[1],this.facePts[0]).cross(p5.Vector.sub(this.facePts[2],this.facePts[0])),this.normal.mult(-1),this.normal.normalize()}}